(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{230:function(e,t,a){e.exports=a(440)},236:function(e,t,a){},237:function(e,t,a){},440:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),s=(a(235),a(236),a(202)),o=a(203),i=a(224),u=a(204),m=a(227),d=a(93),p=(a(237),a(80)),f=a(47),E=a(16),b=a(20),k=a.n(b),v=a(29),y=a(42),g=a(450),I=a(443),h=a(13),T=a(444),w=a(26),O=a(23),j=a.n(O);function N(){var e=Object(w.a)(["\n  mutation deleteTodo($id: ID!, $taskId: ID!) {\n    deleteTodo(where: { id: $id }, taskId: $taskId) {\n      id\n      name\n      completedBy {\n        name\n      }\n      status\n      updatedAt\n    }\n  }\n"]);return N=function(){return e},e}function x(){var e=Object(w.a)(["\n  mutation updateTodo($id: ID!, $taskId: ID!, $completedBy: ID!, $status: TodoStatus!) {\n    updateTodo(\n      where: { id: $id }\n      data: { completedBy: { connect: { id: $completedBy } }, status: $status }\n      taskId: $taskId\n    ) {\n      id\n      name\n      updatedAt\n      completedBy {\n        name\n      }\n      status\n    }\n  }\n"]);return x=function(){return e},e}function C(){var e=Object(w.a)(["\n  mutation updateTask($id: ID!, $taskName: String, $todo: String!, $userId: ID!) {\n    updateTask(\n      where: { id: $id }\n      data: { name: $taskName, list: { create: { name: $todo, createdBy: { connect: { id: $userId } } } } }\n    ) {\n      id\n      name\n      list {\n        id\n        name\n        status\n        createdAt\n        updatedAt\n        completedBy {\n          name\n        }\n        createdBy {\n          name\n        }\n      }\n    }\n  }\n"]);return C=function(){return e},e}function $(){var e=Object(w.a)(["\n  mutation($serialNum: ID!) {\n    linkTask(serialNum: $serialNum) {\n      tasks {\n        id\n      }\n    }\n  }\n"]);return $=function(){return e},e}function D(){var e=Object(w.a)(["\n  mutation($taskId: ID!) {\n    deleteTask(where: { id: $taskId }) {\n      id\n    }\n  }\n"]);return D=function(){return e},e}function A(){var e=Object(w.a)(["\n  mutation ADD_TASK_MUTATION($name: String!) {\n    createTask(data: { name: $name }) {\n      id\n      name\n      serialNum {\n        serialNum\n      }\n    }\n  }\n"]);return A=function(){return e},e}var S=j()(A()),B=j()(D()),_=j()($()),q=j()(C()),P=j()(x()),Q=j()(N());function L(){var e=Object(w.a)(["\n  query COOPERATORS_QUERY($userId: ID!) {\n    cooperators(userId: $userId) {\n      id\n      name\n    }\n  }\n"]);return L=function(){return e},e}function U(){var e=Object(w.a)(["\n  query TASKS_QUERY($userId: ID!) {\n    tasks(where: { cooperators_some: { id: $userId } }) {\n      id\n      name\n      createdAt\n      cooperators {\n        id\n        name\n      }\n      list {\n        id\n        name\n        createdAt\n        updatedAt\n        completedBy {\n          name\n        }\n        createdBy {\n          name\n        }\n      }\n    }\n  }\n"]);return U=function(){return e},e}function F(){var e=Object(w.a)(["\n  query LIST_QUERY($id: ID!) {\n    task(where: { id: $id }) {\n      id\n      name\n      createdAt\n      list {\n        id\n        name\n        status\n        createdAt\n        updatedAt\n        completedBy {\n          name\n        }\n        createdBy {\n          name\n        }\n      }\n    }\n  }\n"]);return F=function(){return e},e}function M(){var e=Object(w.a)(["\n  query SINGLE_TASK_QUERY($id: ID!) {\n    task(where: { id: $id }) {\n      id\n      name\n      serialNum {\n        serialNum\n      }\n      list {\n        id\n        name\n      }\n    }\n  }\n"]);return M=function(){return e},e}function R(){var e=Object(w.a)(["\n  query ME_QUERY {\n    me {\n      id\n      name\n      tasks {\n        id\n        name\n        serialNum {\n          serialNum\n        }\n      }\n    }\n  }\n"]);return R=function(){return e},e}var H=j()(R()),K=(j()(M()),j()(F())),V=j()(U()),Y=j()(L()),z=g.a.Meta,G=function(e){var t=e.task;return r.a.createElement(E.b,{mutation:B,update:function(e,t){var a=t.data.deleteTask.id,n=e.readQuery({query:H}).me,r=e.readQuery({query:V,variables:{userId:n.id}}).tasks;r=r.filter(function(e){return e.id!==a});var c=Object(y.a)({},n,{tasks:n.tasks.filter(function(e){return e.id!==a})});e.writeQuery({query:H,data:{me:c}}),e.writeQuery({query:V,variables:{userId:n.id},data:{tasks:r}})},optimisticResponse:{__typename:"Mutation",deleteTask:{__typename:"Task",id:t.id}}},function(e){return r.a.createElement("div",{className:"col-md-4"},r.a.createElement(g.a,{style:{width:"100%"},actions:[r.a.createElement(I.a,{placement:"topLeft",title:null,content:r.a.createElement("div",null,t.serialNum.serialNum),trigger:"click"},r.a.createElement(h.a,{type:"team"})),r.a.createElement(h.a,{onClick:Object(v.a)(k.a.mark(function a(){return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e({variables:{taskId:t.id}});case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}},a)})),type:"edit"})]},r.a.createElement(p.b,{to:"/list/".concat(t.id)},r.a.createElement(z,{avatar:r.a.createElement("h5",null,"ge"),title:t.name,description:r.a.createElement("div",null,r.a.createElement(T.a,{style:{color:"#f56a00",backgroundColor:"#fde3cf"}},"US"),r.a.createElement(T.a,{style:{color:"#f56a00",backgroundColor:"#fde3cf"}},"AK"),r.a.createElement(T.a,{style:{color:"#f56a00",backgroundColor:"#fde3cf"}},"DK"))}))))})},J=r.a.memo(function(e){return r.a.createElement(E.c,{query:H},function(e){var t=e.loading,a=e.error,n=e.data;return t?r.a.createElement("p",null,"Loading..."):a?r.a.createElement("p",null,"Error :("):r.a.createElement("div",{className:"container p-3"},r.a.createElement("div",{className:"row"},n.me.tasks.map(function(e){return r.a.createElement(G,{key:e.id,task:e})})))})}),W=a(30),X=a(124),Z=a(223),ee=a(449),te=a(40),ae=a(448),ne=a(157),re=a(446),ce=Object(n.createContext)();ce.Consumer;function le(){var e=Object(w.a)(["\n  mutation signin($email: String!, $password: String!) {\n    signin(email: $email, password: $password) {\n      id\n      name\n    }\n  }\n"]);return le=function(){return e},e}var se=j()(le()),oe=r.a.memo(re.a.create()(function(e){var t=e.form.getFieldDecorator,a=Object(n.useCallback)(function(e,t){return c(e,t)}),c=function(){var t=Object(v.a)(k.a.mark(function t(a,n){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.form.validateFields(function(){var e=Object(v.a)(k.a.mark(function e(t,a){var r;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=6;break}return r=Object(y.a)({},a),e.next=4,n({variables:r});case 4:e.sent.data.signin;case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement(E.b,{mutation:se,refetchQueries:[{query:H}]},function(e,n){return n.loading,r.a.createElement(re.a,{onSubmit:function(t){return a(t,e)},className:"login-form"},r.a.createElement(re.a.Item,null,t("email",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(ee.a,{prefix:r.a.createElement(h.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"E-Mail"}))),r.a.createElement(re.a.Item,null,t("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(ee.a,{prefix:r.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(re.a.Item,null,r.a.createElement("div",{className:"d-flex flex-column "},r.a.createElement(te.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"),r.a.createElement("a",{className:"login-form-forgot",href:""},"Forgot password"))))})}));function ie(){var e=Object(w.a)(["\n  mutation createUser($username: String!, $email: String!, $password: String!) {\n    createUser(data: { name: $username, email: $email, password: $password }) {\n      id\n      name\n    }\n  }\n"]);return ie=function(){return e},e}var ue=j()(ie()),me=re.a.create()(function(e){var t=e.form.getFieldDecorator,a=function(){var t=Object(v.a)(k.a.mark(function t(a,n){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),e.form.validateFields(function(){var e=Object(v.a)(k.a.mark(function e(t,a){var r,c;return k.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=8;break}return console.log("Received values of form: ",a),r=Object(y.a)({},a),console.log("Hello data",r),e.next=6,n({variables:r});case 6:c=e.sent,console.log("Hello res",c);case 8:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 2:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement(E.b,{mutation:ue},function(e,n){return n.loading,r.a.createElement(re.a,{onSubmit:function(t){return a(t,e)},className:"login-form"},r.a.createElement(re.a.Item,null,t("username",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(ee.a,{prefix:r.a.createElement(h.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Username"}))),r.a.createElement(re.a.Item,null,t("email",{rules:[{required:!0,message:"Please input your username!"}]})(r.a.createElement(ee.a,{prefix:r.a.createElement(h.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"E-Mail"}))),r.a.createElement(re.a.Item,null,t("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(ee.a,{prefix:r.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Password"}))),r.a.createElement(re.a.Item,null,t("comfirm password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(ee.a,{prefix:r.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"Enter Password Again"}))),r.a.createElement(re.a.Item,null,r.a.createElement("div",{className:"d-flex flex-column "},r.a.createElement(te.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Sign Up"),r.a.createElement("a",{className:"login-form-forgot",href:""},"Forgot password"))))})}),de=ne.a.TabPane,pe=function(){var e=Object(n.useState)("1"),t=Object(W.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"container p-3"},r.a.createElement(ne.a,{defaultActiveKey:a,onChange:function(e){return c(e)}},r.a.createElement(de,{tab:"SIGN IN",key:"1"},r.a.createElement(oe,null)),r.a.createElement(de,{tab:"SIGN UP",key:"2"},r.a.createElement(me,null))))},fe=Object(n.createContext)(void 0),Ee=function(e){var t=Object(n.useState)(!0),a=Object(W.a)(t,2),c=a[0],l=a[1];return r.a.createElement(E.c,{query:H},function(t){var a=t.loading,n=t.error,s=t.data;return n?"error":a?"loading":s.me?r.a.createElement(fe.Provider,{value:s.me},e.children):r.a.createElement(ae.a,{visible:c,title:null,closable:!1,maskClosable:!1,onCancel:function(){return l(!1)},footer:null},r.a.createElement(pe,{showModal:c}))})},be=function(e){var t=Object(n.useState)(""),a=Object(W.a)(t,2),c=a[0],l=a[1],s=Object(n.useContext)(fe);return r.a.createElement(E.b,{mutation:q,update:function(t,a){var n=a.data.updateTask,r=t.readQuery({query:K,variables:{id:e.taskId}});r.task.list=Object(Z.a)(n.list),t.writeQuery({query:K,variables:{id:e.taskId},data:r})},optimisticResponse:{__typename:"Mutation",updateTask:{__typename:"Task",id:e.taskId,name:e.taskName,list:e.list}}},function(t,a){return a.loading,r.a.createElement("div",{className:"creationInput"},r.a.createElement(ee.a,{onChange:function(e){return l(e.target.value)},style:{width:"200px"},className:"mr-3",value:c}),r.a.createElement(te.a,{onClick:function(){var a=Object(v.a)(k.a.mark(function a(n){return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n.preventDefault(),a.next=3,t({variables:{id:e.taskId,todo:c,userId:s.id}});case 3:l("");case 4:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},"Add"))})},ke=a(122),ve=a(159),ye=a(447),ge=a(63),Ie=a.n(ge),he=function(e){var t=Object(n.useContext)(fe);return r.a.createElement(E.b,{mutation:P,refetchQueries:[{query:K,variables:{id:e.taskId}}]},function(a,n){return n.loading,r.a.createElement(te.a,{icon:"check",onClick:function(){var n=Object(v.a)(k.a.mark(function n(r){return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a({variables:{id:e.todoId,taskId:e.taskId,completedBy:t.id,status:"COMPLETED"}});case 2:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},"Complete")})},Te=function(e){return r.a.createElement(E.b,{mutation:Q,optimisticResponse:{__typename:"Mutation",deleteTodo:{__typename:"Todo",id:e.todoId}},update:function(t,a){var n=a.data.deleteTodo,r=t.readQuery({query:K,variables:{id:e.taskId}}).task;r.list=r.list.filter(function(e){return e.id!==n.id}),t.writeQuery({query:K,variables:{id:e.taskId},data:{task:r}})}},function(t,a){return a.loading,r.a.createElement(te.a,{icon:"delete",style:{width:"100%"},className:"d-flex justify-content-start",onClick:Object(v.a)(k.a.mark(function a(){return k.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t({variables:{id:e.todoId,taskId:e.taskId}});case 2:case"end":return a.stop()}},a)}))},"Delete")})},we=function(e){var t=Object(n.useContext)(fe);return r.a.createElement(E.b,{mutation:P,refetchQueries:[{query:K,variables:{id:e.taskId}}]},function(a,n){return n.loading,r.a.createElement(te.a,{icon:"check",onClick:Object(v.a)(k.a.mark(function n(){return k.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a({variables:{id:e.todoId,taskId:e.taskId,completedBy:t.id,status:"ACTIVE"}});case 2:case"end":return n.stop()}},n)}))},"ACTIVE")})},Oe=Object(f.e)(function(e){var t=[{title:"Description",dataIndex:"name",width:"25%",render:function(e,t){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h6",null,e),r.a.createElement("span",{className:"text-muted"},r.a.createElement(Ie.a,{date:t.createdAt})))}},{title:"Completed",width:"25%",dataIndex:"completedBy",render:function(e,t){return e?r.a.createElement("h5",null,r.a.createElement("span",{className:"badge badge-pill badge-success"},e.name)):"n/a"}},{title:"Actions",width:"25%",dataIndex:"id",render:function(t,a){return r.a.createElement(ke.a,{placement:"bottomCenter",overlay:r.a.createElement(ve.a,null,r.a.createElement(ve.a.Item,{key:"1"},r.a.createElement(he,{todoId:t,taskId:e.match.params.TaskId})),r.a.createElement(ve.a.Item,{key:"2"},r.a.createElement(we,{todoId:t,taskId:e.match.params.TaskId})),r.a.createElement(ve.a.Item,{key:"3"},r.a.createElement(Te,{todoId:t,taskId:e.match.params.TaskId})))},r.a.createElement(te.a,{style:{marginLeft:8}},r.a.createElement(h.a,{type:"edit"})))}}],a=e.task,c=e.todoStatus,l=e.subscribeToNewTodos,s=(e.subscribeToEditTodos,e.subscribeToDeleteTodos),o="ALL"===c?a.list:a.list.filter(function(e){return e.status===c});return Object(n.useEffect)(function(){l(),s()},[]),r.a.createElement("div",{className:"col-12"},r.a.createElement(ye.a,{rowKey:function(e){return e.id},columns:t,dataSource:o}))});function je(){var e=Object(w.a)(["\n  subscription DeleteTodo($taskIds: [ID]!) {\n    DeleteTodo(taskIds: $taskIds) {\n      id\n      name\n      updatedAt\n    }\n  }\n"]);return je=function(){return e},e}function Ne(){var e=Object(w.a)(["\n  subscription UpdateTodo($taskIds: [ID]!) {\n    UpdateTodo(taskIds: $taskIds) {\n      id\n      name\n      __typename\n      status\n      completedBy {\n        name\n      }\n    }\n  }\n"]);return Ne=function(){return e},e}function xe(){var e=Object(w.a)(["\n  subscription TaskAdded($taskId: ID!) {\n    TaskAdded(taskId: $taskId) {\n      id\n      name\n      list {\n        id\n        name\n        status\n        createdAt\n        updatedAt\n        completedBy {\n          name\n        }\n        createdBy {\n          name\n        }\n      }\n    }\n  }\n"]);return xe=function(){return e},e}var Ce,$e=j()(xe()),De=j()(Ne()),Ae=j()(je()),Se=Object(n.createContext)(void 0),Be={tasks:[]},_e=function(e,t){switch(t.type){case"reset":return Be;case"updateTasks":return{tasks:t.data};case"updateSubscripTasks":var a=e.tasks.map(function(e){return e.id===t.data.id?t.data:e});return console.log("Hello updateSubscripTasks",a),{tasks:a};default:return e}},qe=(Se.Consumer,Object(E.e)(function(e){return r.a.createElement(Se.Provider,{value:Object(n.useReducer)(_e,Be)},e.children)})),Pe=function(){return Object(n.useContext)(Se)},Qe=Object(f.e)(function(e){var t=Object(n.useContext)(fe),a=Object(n.useState)("ALL"),c=Object(W.a)(a,2),l=c[0],s=c[1],o=Pe(),i=Object(W.a)(o,2),u=(i[0],i[1]);return r.a.createElement(E.c,{query:K,variables:{id:e.match.params.TaskId}},function(a){var n=a.loading,c=a.error,o=a.data,i=a.subscribeToMore;if(n)return r.a.createElement("p",null,"Loading...");if(c)return r.a.createElement("p",null,"Error :(");var m=o.task;return r.a.createElement("div",{className:"container bg-white p-3"},r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col-12 d-flex justify-content-between"},r.a.createElement(be,{taskId:e.match.params.TaskId,taskName:m.name,list:m.list}),r.a.createElement(X.a.Group,{value:l,onChange:function(e){return s(e.target.value)}},r.a.createElement(X.a.Button,{value:"ALL"},"ALL"),r.a.createElement(X.a.Button,{value:"ACTIVE"},"ACTIVE"),r.a.createElement(X.a.Button,{value:"COMPLETED"},"COMPLETED")))),r.a.createElement("div",{className:"row no-gutters"},r.a.createElement(Oe,{task:m,todoStatus:l,subscribeToNewTodos:function(){return i({document:$e,variables:{taskId:t.id},updateQuery:function(e,t){return t.subscriptionData,u({type:"updateSubscripTasks",data:e.task}),Object(y.a)({},e)}})},subscribeToEditTodos:function(){return i({document:De,variables:{taskIds:[e.match.params.TaskId]},updateQuery:function(e,t){var a=t.subscriptionData;return console.log("Hello prev.task",e.task),console.log("Hello subscriptionData",a),u({type:"updateSubscripTasks",data:e.task}),e}})},subscribeToDeleteTodos:function(){return i({document:Ae,variables:{taskIds:[e.match.params.TaskId]},updateQuery:function(e,t){var a=t.subscriptionData;if(a.data.DeleteTodo){var n=a.data.DeleteTodo.id;e.task.list=e.task.list.filter(function(e){return e.id!==n})}return e}})}})))})}),Le=a(452),Ue=a(451),Fe=a(445),Me=re.a.create()(function(e){var t=Object(n.useState)(""),a=Object(W.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!1),o=Object(W.a)(s,2),i=o[0],u=o[1],m=Object(n.useContext)(fe),d=e.form,p=d.getFieldDecorator,f=d.setFieldsValue,b=d.validateFields,g=function(t,a){t.preventDefault(),u(!0),b(function(){var t=Object(v.a)(k.a.mark(function t(n,r){return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,n){t.next=7;break}return t.next=4,a({variables:{name:r.taskName}});case 4:f({taskName:""}),e.switchModal(!1),u(!1);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("createTask error",t.t0);case 12:case"end":return t.stop()}},t,null,[[0,9]])}));return function(e,a){return t.apply(this,arguments)}}())};return r.a.createElement(re.a,{onSubmit:g,className:"login-form"},r.a.createElement(E.b,{mutation:S,refetchQueries:[{query:V,variables:{userId:m.id}}],update:function(e,t){var a=t.data.createTask,n=e.readQuery({query:H}).me,r=Object(y.a)({},n,{tasks:n.tasks.concat([a])});e.writeQuery({query:H,data:{me:r}})}},function(e,t){return t.loading,r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a.Item,null,r.a.createElement("h6",null,"Create Task"),p("taskName",{rules:[{required:!0,message:"Please input your Task Name!"}]})(r.a.createElement(ee.a,{size:"large",prefix:r.a.createElement(h.a,{type:"book",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Task Name"}))),r.a.createElement(re.a.Item,null,r.a.createElement(te.a,{disabled:i,onClick:function(t){return g(t,e)},htmlType:"submit",type:"primary",block:!0},"CREATE")))}),r.a.createElement(Fe.a,null," or "),r.a.createElement(E.b,{mutation:_,refetchQueries:[{query:H}]},function(e,t){return t.loading,r.a.createElement(r.a.Fragment,null,r.a.createElement(re.a.Item,null,r.a.createElement("h6",null,"Join a Task"),r.a.createElement(ee.a,{size:"large",prefix:r.a.createElement(h.a,{type:"book",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Task ID",value:c,onChange:function(e){return l(e.target.value)}})),r.a.createElement(re.a.Item,null,r.a.createElement(te.a,{block:!0,onClick:Object(v.a)(k.a.mark(function t(){var a;return k.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e({variables:{serialNum:c}});case 2:a=t.sent,console.log("Hello res",a);case 4:case"end":return t.stop()}},t)}))},"JOIN")))}))}),Re=a(453),He=function(e){return r.a.createElement(Re.a,{itemLayout:"vertical",dataSource:e.tasks,renderItem:function(e){var t=e.list.slice(-1)[0];return r.a.createElement(Re.a.Item,null,r.a.createElement(Re.a.Item.Meta,{className:"mb-0",avatar:t?r.a.createElement(T.a,{style:{backgroundColor:"#87d068"}},t.completedBy?t.completedBy.name[0]:t.createdBy.name[0]):r.a.createElement(T.a,{icon:"user"}),title:e.name,description:r.a.createElement(r.a.Fragment,null,t?r.a.createElement(r.a.Fragment,null,t.completedBy?r.a.createElement("span",null,t.name," ",r.a.createElement("b",null,"Completed")," by ",t.completedBy.name):r.a.createElement("span",null,t.name," ",r.a.createElement("b",null,"Created")," by ",t.createdBy.name),r.a.createElement("div",{className:"d-flex mt-1 align-items-center"},r.a.createElement(h.a,{type:"clock-circle",className:"mr-2"}),r.a.createElement(Ie.a,{date:t.updatedAt}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Task ",r.a.createElement("b",null,"Created")),r.a.createElement("div",{className:"d-flex mt-1 align-items-center"},r.a.createElement(h.a,{type:"clock-circle",className:"mr-2"}),r.a.createElement(Ie.a,{date:e.createdAt}))))}))}})},Ke=a(220),Ve=a.n(Ke),Ye=function(e){var t=Pe(),a=Object(W.a)(t,2),c=a[0].tasks,l=a[1];return Object(n.useEffect)(function(){l({type:"updateTasks",data:e.tasks})},[]),console.log("Hello tasks",c),r.a.createElement(Re.a,{itemLayout:"vertical",dataSource:c,renderItem:function(e){var t=Ve()(e.list,"updatedAt").slice(-1)[0];return console.log("Hello latestTodo",t),r.a.createElement(Re.a.Item,null,r.a.createElement(Re.a.Item.Meta,{className:"mb-0",avatar:t?r.a.createElement(T.a,{style:{backgroundColor:"#87d068"}},t.completedBy?t.completedBy.name[0]:t.createdBy.name[0]):r.a.createElement(T.a,{icon:"user"}),title:e.name,description:r.a.createElement(r.a.Fragment,null,t?r.a.createElement(r.a.Fragment,null,t.completedBy?r.a.createElement("span",null,t.name," ",r.a.createElement("b",null,"Completed")," by ",t.completedBy.name):r.a.createElement("span",null,t.name," ",r.a.createElement("b",null,"Created")," by ",t.createdBy.name),r.a.createElement("div",{className:"d-flex mt-1 align-items-center"},r.a.createElement(h.a,{type:"clock-circle",className:"mr-2"}),r.a.createElement(Ie.a,{date:t.updatedAt}))):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",null,"Task ",r.a.createElement("b",null,"Created")),r.a.createElement("div",{className:"d-flex mt-1 align-items-center"},r.a.createElement(h.a,{type:"clock-circle",className:"mr-2"}),r.a.createElement(Ie.a,{date:e.createdAt}))))}))}})},ze=ne.a.TabPane,Ge=function(e){Object(n.useContext)(fe);var t=e.tasks,a=e.corporateTasks;return r.a.createElement(ne.a,{defaultActiveKey:"1",onChange:function(){}},r.a.createElement(ze,{tab:r.a.createElement("span",null,r.a.createElement(h.a,{type:"user"}),"Personal"),key:"1"},r.a.createElement(He,{tasks:t})),r.a.createElement(ze,{tab:r.a.createElement("span",null,r.a.createElement(h.a,{type:"team"}),"Corporate"),key:"2"},r.a.createElement(Ye,{tasks:a})))},Je=a(123),We=function(e){var t=e.User;return r.a.createElement(E.c,{query:Y,variables:{userId:t.id}},function(e){var t=e.data,a=e.loading,n=e.error;if(a)return"Loading...";if(n)return"Error...";var c=t.cooperators;return r.a.createElement("div",{className:"personal__corporatersList"},c.map(function(e){return r.a.createElement(Je.a,{key:e.id,placement:"top",title:e.name},r.a.createElement(T.a,{size:30},e.name[0]))}))})},Xe=a(221),Ze=a.n(Xe),et=Le.a.Sider,tt=function(e){var t=Object(n.useState)(!1),a=Object(W.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)({}),o=Object(W.a)(s,2),i=o[0],u=o[1],m=Object(n.useContext)(fe);return Object(n.useEffect)(function(){!Ze()(i)&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success",t="success"===e?"Todo item ".concat(i.name," has been created by ").concat(i.createdBy.name):i.message;Ue.a[e]({message:"Notification Title",description:t,onClick:function(){console.log("Notification Clicked!")}})}(i.type)}),r.a.createElement(E.c,{query:V,variables:{userId:m.id}},function(e){var t=e.data,a=e.loading;if(e.error)return"error";if(a)return"loading";var n=t.tasks,s=n.filter(function(e){return e.cooperators.length>1});return r.a.createElement(et,{breakpoint:"lg",collapsedWidth:"0",onBreakpoint:function(e){},theme:"light",width:"380",className:"shadow"},r.a.createElement("div",{className:"personal p-3"},r.a.createElement("div",{className:"personal__info d-flex mt-5 mb-4"},r.a.createElement("div",{className:"personal__avatar"},r.a.createElement(T.a,{size:64,icon:"user"})),r.a.createElement("div",{className:"personal__name d-flex align-items-center p-3"},m.name)),r.a.createElement("hr",null),r.a.createElement("div",{className:"personal__tasks mt-5 w-100 position-static"},r.a.createElement("h5",null,"Tasks"),r.a.createElement("div",{className:"d-flex justify-content-end"},r.a.createElement(te.a,{onClick:function(){return l(!0)},shape:"circle",icon:"plus"})),r.a.createElement(Ge,{tasks:n,corporateTasks:s})),r.a.createElement("hr",null),r.a.createElement("div",{className:"personal__corporaters mt-5"},r.a.createElement("h5",null,"Corporaters"),r.a.createElement(We,{User:m})),r.a.createElement(ae.a,{visible:c,title:null,closable:!1,onCancel:function(){return l(!1)},footer:null},r.a.createElement(Me,{switchModal:l}))),r.a.createElement(E.d,{subscription:$e,variables:{taskId:m.id}},function(e){var t=e.data;if(e.loading,t&&t.TaskAdded){var a=t.TaskAdded.list.slice(-1)[0];u(a)}return null}),r.a.createElement(E.d,{subscription:De,variables:{taskIds:s.map(function(e){return e.id})}},function(e){var t=e.data;if(e.loading,t&&t.UpdateTodo){var a="Todo item ".concat(t.UpdateTodo.name," has been updated by ").concat(t.UpdateTodo.completedBy.name);u({message:a,type:"info"})}return null}),r.a.createElement(E.d,{subscription:Ae,variables:{taskIds:s.map(function(e){return e.id})}},function(e){var t=e.data;if(e.loading,t&&t.DeleteTodo){var a="Todo item ".concat(t.DeleteTodo.name," was delete at ").concat(t.DeleteTodo.updatedAt);u({message:a,type:"warning"})}return null}))})},at=a(83),nt=a(226),rt=a(225),ct=a(31),lt=a(222),st=a(5),ot=Le.a.Header,it=Le.a.Content,ut=Le.a.Footer;console.log("Hello process.env.NODE_ENV","production");var mt=new rt.a({uri:"https://gqtodolist-prod.herokuapp.com/"}),dt=new lt.a((Ce={uri:"ws://localhost:5678/"},Object(d.a)(Ce,"uri","wss://gqtodolist-prod.herokuapp.com/"),Object(d.a)(Ce,"options",{reconnect:!0}),Ce)),pt=Object(ct.d)(function(e){var t=e.query,a=Object(st.k)(t),n=a.kind,r=a.operation;return"OperationDefinition"===n&&"subscription"===r},dt,mt),ft=new at.a({link:pt,cache:new nt.a}),Et=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(E.a,{client:ft},r.a.createElement(p.a,{basename:"/"},r.a.createElement(Ee,null,r.a.createElement(qe,null,r.a.createElement(Le.a,{className:"app__container"},r.a.createElement(tt,null),r.a.createElement(Le.a,null,r.a.createElement(ot,{style:{background:"#fff",padding:0}},r.a.createElement(p.b,{className:"ml-3",to:"/"},r.a.createElement(te.a,{shape:"circle",icon:"left"}))),r.a.createElement(it,{style:{margin:"24px 16px 0"}},r.a.createElement(f.c,null,r.a.createElement(f.a,{exact:!0,path:"/",component:J}),r.a.createElement(f.a,{path:"/list/:TaskId",component:Qe}),r.a.createElement(f.a,{path:"/login",component:pe}))),r.a.createElement(ut,{style:{textAlign:"center"}},"Ant Design \xa92018 Created by Ant UED")))))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Et,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[230,1,2]]]);
//# sourceMappingURL=main.9a159ffb.chunk.js.map